import React from 'react';
import Request from 'services'
import { GetMessageList } from 'actions';

const loadMessages = (Component) => { 
    class AsyncComponent extends React.Component {
        componentDidMount() {
            Request.Get(`/api/private-messages/list/${this.props.match.params.id}`)
                .then(
                    res => {
                        GetMessageList(res.data);
                    },
                    err => {
                        console.log(err);
                    }
                )
        }
        render() {
            if (!this.props.messageList) return null;
            return (
                <Component messageList={this.props.chatList}/>
            )
        }
    }
    return AsyncComponent;
};

export default loadMessages;