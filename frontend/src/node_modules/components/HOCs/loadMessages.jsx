import React from 'react';
import API from 'services'

const loadMessages = (Component) => { 
    class AsyncComponent extends React.Component {
        componentWillMount() {
            API.Get(`private-messages/list/${this.props.match.params.id}`)
                .then(
                    res => {
                        this.props.GetMessageList(res.data);
                    },
                    err => {
                        console.log(err);
                    }
                )
        }
        render() {
            if (!this.props.messageList) return null;
            return (
                <Component {...this.props} />
            )
        }
    }
    return AsyncComponent;
};

export default loadMessages;