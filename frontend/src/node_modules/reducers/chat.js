import {CHANGE_CHAT_LAST_MESSAGE, CHANGE_CURRENT_CHAT, FETCH_CHATS_SUCCESS} from 'constants/action-types'

const initialState = {
    current_chat_id: null,
    chats: []
};

export default function chat(state = initialState, action) {
    switch (action.type) {
        case FETCH_CHATS_SUCCESS:
            return {...state, chats: action.payload};
        case CHANGE_CURRENT_CHAT:
            return {...state, current_chat_id: action.payload};
        case CHANGE_CHAT_LAST_MESSAGE:
            console.log(action.payload);
            console.log('reducer');
            return {
                ...state, chats: state.chats.map(chat => {
                    if (chat.id === action.payload.chat) {
                        return {...chat, last_message: action.payload}
                    }
                    return chat
                })
            };
        default:
            return state;
    }
}